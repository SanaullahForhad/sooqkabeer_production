#!/bin/bash
# Termux-API ржЗржирж╕рзНржЯрж▓ ржерж╛ржХрж▓рзЗ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржУржкрзЗржи ржХрж░ржмрзЗ
if command -v termux-open-url &> /dev/null; then
    termux-open-url "http://127.0.0.1:8080"
    echo "ЁЯМР ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржУржкрзЗржи ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ..."
else
    echo "ЁЯУ▒ ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржУржкрзЗржи ржХрж░рзБржи:"
    echo "   http://127.0.0.1:8080"
    echo "   http://10.84.179.168:8080"
fi

# рзл рж╕рзЗржХрзЗржирзНржб ржкрж░ ржЕржЯрзЛ-ржЯрзЗрж╕рзНржЯ
sleep 5
echo ""
echo "ЁЯФН ржЕржЯрзЛ-ржЯрзЗрж╕рзНржЯ ржЪрж▓ржЫрзЗ..."
python -c "
import requests
try:
    r = requests.get('http://127.0.0.1:8080', timeout=3)
    print(f'тЬЕ рж╕рж╛рж░рзНржнрж╛рж░ рж░рзЗрж╕ржкржирзНрж╕: {r.status_code}')
    print(f'   ржЯрж╛ржЗржЯрзЗрж▓: {r.text[:100]}...' if r.text else '   (ржЦрж╛рж▓рж┐ рж░рзЗрж╕ржкржирзНрж╕)')
except Exception as e:
    print(f'тЭМ Error: {e}')
"
