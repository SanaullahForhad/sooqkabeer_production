{% extends "base.html" %}

{% block title %}SooqKabeer - B2B Wholesale Marketplace{% endblock %}

{% block styles %}
<style>
    /* Hero Section */
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 80px 0;
        border-radius: 20px;
        margin-bottom: 50px;
        position: relative;
        overflow: hidden;
    }

    .hero-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" opacity="0.1"><path fill="white" d="M0,0 L1000,0 L1000,100 L0,100 Z"/></svg>');
        background-size: cover;
    }

    .hero-title {
        font-size: 3.5rem;
        font-weight: bold;
        margin-bottom: 20px;
    }

    .hero-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 30px;
    }

    /* Features Section */
    .features-section {
        padding: 60px 0;
    }

    .feature-card {
        text-align: center;
        padding: 30px;
        border-radius: 15px;
        background: white;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: all 0.3s;
        height: 100%;
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }

    .feature-icon {
        font-size: 48px;
        margin-bottom: 20px;
        color: var(--primary);
    }

    /* Categories Section */
    .categories-section {
        padding: 60px 0;
        background: #f8f9fa;
        border-radius: 20px;
        margin: 40px 0;
    }

    .category-card {
        position: relative;
        border-radius: 15px;
        overflow: hidden;
        height: 200px;
        margin-bottom: 20px;
    }

    .category-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s;
    }

    .category-card:hover .category-image {
        transform: scale(1.1);
    }

    .category-overlay {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: rgba(0,0,0,0.7);
        color: white;
        padding: 20px;
        text-align: center;
    }

    /* Stats Section */
    .stats-section {
        padding: 60px 0;
    }

    .stat-item {
        text-align: center;
        padding: 30px;
    }

    .stat-number {
        font-size: 3rem;
        font-weight: bold;
        color: var(--primary);
        margin-bottom: 10px;
    }

    /* Products Preview */
    .products-section {
        padding: 60px 0;
    }

    .product-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: all 0.3s;
        margin-bottom: 30px;
        height: 100%;
    }

    .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }

    .product-image {
        width: 100%;
        height: 200px;
        object-fit: cover;
    }

    .product-body {
        padding: 20px;
    }

    .product-price {
        font-size: 1.5rem;
        font-weight: bold;
        color: var(--secondary);
    }

    /* CTA Section */
    .cta-section {
        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);
        color: white;
        padding: 80px 0;
        border-radius: 20px;
        margin: 60px 0;
        text-align: center;
    }

    /* Responsive */
    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }

        .hero-section {
            padding: 50px 0;
        }
    }
</style>
{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="container position-relative">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <h1 class="hero-title">
                        Wholesale Marketplace<br>
                        <span style="color: #ffd700;">For Businesses</span>
                    </h1>
                    <p class="hero-subtitle">
                        Source quality products directly from suppliers at competitive prices.
                        Join thousands of businesses growing with SooqKabeer.
                    </p>
                    <div class="d-flex gap-3 flex-wrap">
                        <a href="/register" class="btn btn-light btn-lg px-5">
                            <i class="fas fa-store"></i> Start Selling
                        </a>
                        <a href="/products" class="btn btn-outline-light btn-lg px-5">
                            <i class="fas fa-shopping-cart"></i> Browse Products
                        </a>
                    </div>
                </div>
                <div class="col-lg-6 text-center">
                    <div style="font-size: 300px; opacity: 0.2;">
                        üõí
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features-section">
        <div class="container">
            <h2 class="text-center mb-5">Why Choose SooqKabeer?</h2>

            <div class="row g-4">
                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">üí∞</div>
                        <h3>Best Prices</h3>
                        <p>Get wholesale prices directly from suppliers and manufacturers.</p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">üöö</div>
                        <h3>Fast Delivery</h3>
                        <p>Reliable shipping across Kuwait with real-time tracking.</p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">üõ°Ô∏è</div>
                        <h3>Secure Payments</h3>
                        <p>Multiple secure payment options with buyer protection.</p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">üë•</div>
                        <h3>Bulk Orders</h3>
                        <p>Special discounts for bulk purchases and repeat orders.</p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">üì±</div>
                        <h3>Mobile App</h3>
                        <p>Manage your business on the go with our mobile application.</p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="feature-card">
                        <div class="feature-icon">üíº</div>
                        <h3>B2B Focused</h3>
                        <p>Platform designed specifically for business-to-business transactions.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section">
        <div class="container">
            <div class="row text-center">
                <div class="col-md-3">
                    <div class="stat-item">
                        <div class="stat-number">500+</div>
                        <h5>Suppliers</h5>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-item">
                        <div class="stat-number">10K+</div>
                        <h5>Products</h5>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-item">
                        <div class="stat-number">50K+</div>
                        <h5>Businesses</h5>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-item">
                        <div class="stat-number">100%</div>
                        <h5>Satisfaction</h5>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="text-center mb-5">Popular Categories</h2>

            <div class="row">
                <div class="col-md-3">
                    <div class="category-card">
                        <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                             class="category-image"
                             alt="Groceries">
                        <div class="category-overlay">
                            <h4>Groceries</h4>
                            <p>1000+ Products</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="category-card">
                        <img src="https://images.unsplash.com/photo-1579113800032-c38bd7635818?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                             class="category-image"
                             alt="Electronics">
                        <div class="category-overlay">
                            <h4>Electronics</h4>
                            <p>800+ Products</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="category-card">
                        <img src="https://images.unsplash.com/photo-1560743641-3914f2c45636?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                             class="category-image"
                             alt="Clothing">
                        <div class="category-overlay">
                            <h4>Clothing</h4>
                            <p>1200+ Products</p>
                        </div>
                    </div>
                </div>

                <div class="col-md-3">
                    <div class="category-card">
                        <img src="https://images.unsplash.com/photo-1581094794329-c8112a89af12?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                             class="category-image"
                             alt="Home & Kitchen">
                        <div class="category-overlay">
                            <h4>Home & Kitchen</h4>
                            <p>900+ Products</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-4">
                <a href="/categories" class="btn btn-primary btn-lg">
                    <i class="fas fa-list"></i> View All Categories
                </a>
            </div>
        </div>
    </section>

    <!-- Products Preview -->
    <section class="products-section">
        <div class="container">
            <h2 class="text-center mb-5">Featured Products</h2>

            <div class="row">
                {% if products %}
                    {% for product in products[:8] %}
                    <div class="col-md-3 mb-4">
                        <div class="product-card">
                            <!-- IMPORTANT: Changed from get_name() to direct attribute access -->
                            <img src="{{ product.image_url if product.image_url else '/static/images/default-product.jpg' }}"
                                 class="product-image img-fluid"
                                 alt="{{ product.name if product.name else product.name_en if product.name_en else 'Product Image' }}">
                            
                            <div class="product-body">
                                <!-- IMPORTANT: No get_name() method call here -->
                                <h5>{{ product.name if product.name else product.name_en if product.name_en else 'Unnamed Product' }}</h5>
                                
                                <p class="text-muted">
                                    {% if product.description %}
                                        {{ product.description[:50] }}...
                                    {% else %}
                                        No description available
                                    {% endif %}
                                </p>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="product-price">
                                        {% if product.price %}
                                            ‡ß≥{{ product.price }}
                                        {% else %}
                                            ‡ß≥0.00
                                        {% endif %}
                                    </span>
                                    
                                    <a href="/product/{{ product.id }}" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-eye"></i> View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <!-- Fallback: Show sample products when no products in database -->
                    {% for i in range(4) %}
                    <div class="col-md-3 mb-4">
                        <div class="product-card">
                            <img src="https://images.unsplash.com/photo-1546069901-ba9599a7e63c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80"
                                 class="product-image img-fluid"
                                 alt="Sample Product">
                            
                            <div class="product-body">
                                <h5>Sample Product {{ i+1 }}</h5>
                                
                                <p class="text-muted">
                                    High quality product description goes here...
                                </p>
                                
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="product-price">‡ß≥0.900 KD</span>
                                    
                                    <a href="#" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-eye"></i> View
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}
            </div>

            <div class="text-center mt-4">
                <a href="/products" class="btn btn-primary btn-lg">
                    <i class="fas fa-shopping-basket"></i> View All Products
                </a>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
        <div class="container">
            <h2 class="display-4 mb-4">Ready to Grow Your Business?</h2>
            <p class="lead mb-5">
                Join thousands of businesses already using SooqKabeer to source products at wholesale prices.
            </p>
            <div class="d-flex justify-content-center gap-3 flex-wrap">
                <a href="/register" class="btn btn-light btn-lg px-5 py-3">
                    <i class="fas fa-user-plus"></i> Register Free
                </a>
                <a href="/contact" class="btn btn-outline-light btn-lg px-5 py-3">
                    <i class="fas fa-phone"></i> Contact Sales
                </a>
            </div>
        </div>
    </section>

    <!-- Testimonials -->
    <section class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">What Our Customers Say</h2>

            <div class="row">
                <div class="col-md-4">
                    <div class="card p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center"
                                 style="width: 50px; height: 50px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="mb-0">Ahmed Al-Salem</h5>
                                <small class="text-muted">Grocery Store Owner</small>
                            </div>
                        </div>
                        <p class="mb-0">
                            "SooqKabeer helped me reduce my sourcing costs by 30%. The platform is easy to use and delivery is always on time."
                        </p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center"
                                 style="width: 50px; height: 50px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="mb-0">Fatima Al-Mansoor</h5>
                                <small class="text-muted">Restaurant Manager</small>
                            </div>
                        </div>
                        <p class="mb-0">
                            "Best wholesale platform in Kuwait! Quality products, competitive prices, and excellent customer support."
                        </p>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card p-4">
                        <div class="d-flex align-items-center mb-3">
                            <div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center"
                                 style="width: 50px; height: 50px;">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="ms-3">
                                <h5 class="mb-0">Mohammed Ali</h5>
                                <small class="text-muted">Electronics Shop</small>
                            </div>
                        </div>
                        <p class="mb-0">
                            "The referral program helped me earn extra income while growing my business. Highly recommended!"
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}

{% block scripts %}
<script>
    // Animate stats counter
    function animateCounter(element, target) {
        let current = 0;
        const increment = target / 100;
        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            element.textContent = Math.floor(current) + "+";
        }, 20);
    }

    // Initialize counters when in viewport
    document.addEventListener('DOMContentLoaded', function() {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statNumbers = entry.target.querySelectorAll('.stat-number');
                    statNumbers.forEach(stat => {
                        const target = parseInt(stat.textContent);
                        if (!isNaN(target)) {
                            animateCounter(stat, target);
                        }
                    });
                }
            });
        });

        const statsSection = document.querySelector('.stats-section');
        if (statsSection) {
            observer.observe(statsSection);
        }
    });
</script>
{% endblock %}
